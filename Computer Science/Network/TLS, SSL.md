// 20220830 <br>
// Brown

<br>
<br>

# ✅ SSL과 TLS의 차이
밑에 글을 읽다보면 아시다시피, SSL/TLS는 같은 역할을 하는 프로토콜입니다.
가장 최신버전인 SSL3.0은 2015년에 사용이 종료되면서 TLS와의 혼란을 없앴다.
TLS는 1.0버전은 1999년 IETF에서 개발했지만, 사실상 SSL3.1 버전이나 마찬가지입니다. 지금은 TLS1.3까지 나온 상태고, 그것을 사용중이다!


# 🟠 SSL (Secure Socket Layer)
원래 웹에서 데이터는 가로채면 누구나 읽을 수 있는 일반 텍스트 형태로 전송되었다. 이러한 문제 때문에 인터넷 통신의 개인정보보호, 인증, 데이터 무결성을 보장하기 위해 Netscape가 1995년 처음으로 SSL을 개발하였다.

SSL/TLS를 사용하는 웹사이트의 URL은 ```HTTP``` 대신 ```HTTPS```가 사용된다.

<p align="center"><img width="400" alt="image" src="https://user-images.githubusercontent.com/96969693/187389976-b1c725b4-08cb-4563-baeb-c4ff940c9507.png"></p>

SSL은 1996년 SSL3.0 이후 업데이트 되지 않았으며, 앞으로 사라지게 될것이라고 여겨지고 있다.(😱) 또한 알려진 취약성이 여러가지 있으며, 보안 전문가들은 SSL 사용중단을 권장한다고 한다. 그 대안으로 앞에서 언급한 TLS가 있다.

TLS는 최신 암호화 프로토콜로, SSL 암호화로 혼용해서 부르는 경우도 많다. 실제로 현재 SSL을 인증한 업체 및 제공하는 업체는 사실상 TLS 암호화를 제공하고 있다. (HTTPS는 특정 프로토콜이 정해져 있지 않고, TLS, SSL이라고 불리는 프로토콜이 만들어주는 안전한 연결방법을 사용하고 이를 기반으로 통신한다. 그래서 혼용해서 쓴다고 하는것이다.)


# 🟠 TLS (Transport Layer Security)
TLS는 SSL의 업데이트 버젼으로, SSL의 최종버전인 SSL3.0과 TLS의 최초버전은 큰 차이는 없다. 이름이 바뀐 것은 SSL 초기 개발사 Netscape가 업데이트에 참여하지 않게 되어 소유권을 변경하기 위해서 바꿨다고 한다. (🤔 차이점이 고작 이건가?)

SSL/TLS는 클라이언트와 서버간의 핸드셰이크를 통해 인증이 이루어진다. 또한 데이터 무결성을 위해 데이터에 디지털 서명을 하여, 데이터가 의도적으로 도착하기 전에 조작된 여부를 확인한다.


# 🟠 SSL과 TLS의 역할
- 인증이나 암호키 교환
- 정보의 암호화에 사용하는 각 알고리즘(처리방법)을 여러개 중 선택해서 사용한다.
  - 어떤 알고리즘을 선택하는 가는, 통신의 초기 단계에서 서버와 클라이언트가 서로 대화하여 서로가 공통적으로 대응할 수 있는 것을 선택한다.
- SSL/TLS의 주요 역할은 다음과 같다.
  - 암호화: 도청되더라도 내용을 알 수 없도록 암호화한다.
  - 인증: 올바른 대상인지 확인한다.
  - 조작검사: 내용이 조작되었는지 확인한다.

```
SSL/TLS는 안전한 보안 채널을 형성해주는 역할을 수행하는 보안용 프로토콜이라고 이해하자.
```

## 🔸 SSL/TLS의 위치
SSL/TLS는 응용계층(HTTP)와 전송계층(TCP)사이에 존재한다.

<p align="center"><img width="640" alt="image" src="https://user-images.githubusercontent.com/96969693/187391573-9598376e-3af2-447a-8650-8437e4a1d3b3.png"></p>


## 🔸 SSL/TLS 핸드셰이크
```
핸드셰이크는 클라이언트와 서버의 메시지 교환이며, HTTPS웹에 처음 커넥션할 때 진행된다.
일반적으로 RSA 키 교환 알고리즘이 사용된다.
```

### 👉 RSA 키 교환 알고리즘 순서

<p align="center"><img width="889" alt="image" src="https://user-images.githubusercontent.com/96969693/187394203-7edd7309-9ac7-4b1f-a4e4-c7724dca59ca.png"></p>

1. 클라이언트 → 서버에 메세지 전송: 이때 핸드셰이크가 시작된다. 이 메세지에는 TLS버전, 암호화 알고리즘, 무작위 바이트 문자열이 포함된다.
2. 서버 → 클라이언트 메세지 전송: 클라이언트의 메세지에 응답으로 서버의 SSL인증서ㅓ, 선태한 암호화 알고리즘, 서버에서 생성한 무작위 바이트 문자열을 포함한 메세지를 전송한다.
3. 인증: 클라이언트가 서버의 SSL인증서가 믿을만한지 확인한다.
4. 예비 마스터 암호: 클라이언트는 무작위 바이트 문자열을 공개키로 암호화된 premater secret 키를 서버로 전송한다.
5. 개인키 사용: 서버가 premaster secret값을 개인키를 통해 복호화한다. (개인키로만 복호화가능)
6. 세션키 생성: 클라이언트와 서버는 클라이언트가 생성한 무작위키, 서버가 생성한 무작위키, premaster secret키를 통해 세션키를 생성한다. 양쪽은 같은키가 생성되어야한다.
7. 클라이언트 완료 전송: 클라이언트는 세션키로 암호화된 완료 메세지를 전송한다.
8. 서버 완료 전송: 서버도 세션키로 암호화된 완료 메세지를 전송한다.
9. 핸드셰이크 완료: 핸드셰이크가 완료되고, 세션키를 이용해 HTTPS 통신을 진행한다.

```
🤔 왜 알아야 하는가?
대부분의 클라우드 서비스들은 HTTPS를 사용하여 스토리지 파일 업로드/다운로드, DB의 CRUD작업, 미디어 서비스의 스트리밍 작업, REST API 호출 등을 하기 때문에 HTTPS의 적용 방법을 이해하기 위한 SSL 핸드셰이크는 매우 중요한 지식이다.
```

## 🔸 SSL/TLS 인증서
SSL은 SSL/TLS인증서가 있는 웹페이지만 실행할 수 있다. 인증서는 사람의 신분증과 유사하다고 볼 수 있다. 
SSL인증서(=TLS인증서)에는 공개키가 포함된다. 이 공개키 덕분에 암호화가 가능하게 된다. 클라이언트의 요청은 공개키를 이용해 서버에 암호화하여 전달한다. 서버에도 공개되지 않은 개인키가 있는데, 이 개인키를 이용해 암호화된 데이터를 복호화한다.

해당 인증서를 발급해주는 기관은 CA(certificate authority)라고 한다.



## 📖 Reference
- [SSL 핸드셰이크, 개념 출처](https://kanoos-stu.tistory.com/46)
- [SSL 핸드셰이크 사진 출처](https://brunch.co.kr/@sangjinkang/38)
- [SSL/TLS역할 개념 참고](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=hai0416&logNo=221623579719)
- [SSL/TLS 차이점 (만화)](https://howhttps.works/ko/https-ssl-tls-differences/)










