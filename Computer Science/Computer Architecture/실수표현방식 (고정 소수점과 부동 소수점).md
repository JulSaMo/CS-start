// 2022.07.26

// JI SOO (Brown)



# 실수의 표현 방식

## 🟣 실수란?

- 실수는 주로 실직선 위의 점, 또는 십진법 전개로 표현되는 수 체계이다. 실수는 0보다 큰 양수, 0보다 작은 음수, 0으로 구분되며, 실직선 위에 모든 수를 표현하기 떄문에 ```소수점도 포함된다```.

<img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728004035989.png" alt="image-20220728004035989" style="zoom:67%;" />

### 🟣 실수의 표현 방식

- 고정 소수점
- 부동 소수점

컴퓨터에서 실수를 표현하는 방법은 정수에 비해 훨씬 복잡하다. 컴퓨터에서 실수는 정수와 마찬가지로 0과 1 즉, 2진법으로만 표현해야하기 떄문이다. 따라서 실수를 표현하기 위한 방법으로 ```고정소수점``` 과 ```부동소수점```을 사용하고 있다.



## 🟣 고정소수점 (Fized Point)

실수는 보통 정수부와 소수부로 나뉜다. 따라서 실수를 표현하는 가장 간단한 방식은 소수부 자릿수를 미리 정하여 고정된 자릿수의 소수를 표현하는 것이 고정 소수점이다.

### 🟣 고정소수점 구성

<img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728004659482.png" alt="image-20220728004659482" style="zoom:50%;" />

### 🟣 위 그림을 바탕으로 예시를 살펴보자.

고정소수점이 32비트일 때, ```부호비트는 1비트만 가져간다.``` 부호비트는 실수의 부호를 나타내는 비트 자리로, 실수가 음수라면 1을 양수라면 0을 입력해준다.

정수부에서는 실수의 정수부분을 2진법으로 표현하여 입력해준다. 15비트를 차지한다. 소수부에서도 마찬가지로 동일하게 2진법으로 표현하여 입력해준다. 16비트를 차지한다. (하지만, 이렇게 15, 16비트만 차지할 수 있어서 너무 범위가 적다는 것이 단점이다)



#### 📝 ```12.125```실수를 예시로 표현해보자.

1. 가장 먼저 ```12.125```실수를 부호, 정수부, 소수부로 나누어 2진법으로 구한다.

| 분류   | 이진법       |
| ------ | ------------ |
| 부호   | 0 (양수라서) |
| 정수부 | 1100         |
| 소수부 | 001          |

> 💁🏻 여기서 잠깐, 소수부는 어떻게 2진법으로 구할까?
>
> 소수점 뒤에있는 숫자들은 하나씩 2진법으로 바꿔버리면 되지 않을까? 라고 생각할 수도 있지만, 그렇게 되면 아래 처럼 서로다른 10진수가 2진수로 변환됐을때 중복이 되는 문제가 생긴다.
>
> | 10진수 | 2진수   |
> | ------ | ------- |
> | 1.41   | 1.100 1 |
> | 1,9    | 1.1001  |
>
> 그렇기 때문에 소수부를 구하는 방식은 조금 다르다.
>
> 소수부는 10진수에 2를 곱해가면서 1이나 0을 뽑아내는 방식으로 진행한다. 정수부를 변환할때면 1이나오면 종료했다면, 여기서는 0이 나오면 종료하고 결과를 밑에서부터가 아니라 위에서부터 읽어준다.
>
> 📝 ```0.625```를 이진수로 변환하는 예시
>
> ```
> 0.625 * 2 = 1.25 = 1 + 0.25 -> 1
> 0.25  * 2 = 0.5  = 0 + 0.5  -> 0
> 0.5   * 2 = 1.0  = 1 + 0    -> 1
> 
> 나머지가 0이 나왔으니까, 빼낸 숫자들을 위에서부터 읽어주면, 0.101
> 
> ```

2. 이렇게 구한 각각의 부호, 정수부, 소수부를 각 비트 파트에 입력해주면 고정소수점이 완성된다!

![image-20220728011542465](/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728011542465.png)



## 🟣 부동 소수점 (Floating Point)

고정소수점에서 실수를 정수부와 소수부로 나눴지만, 부동소수점에서는 ```가수부```와 ```지수부```로 나눈다.

### 🟣 부동소수점 구성

아래처럼 작성하는 방식이 부동소수점 방식으로 저장된 실수라고 볼 수 있다. 이처럼 부동소수점은 고정소수점과 다르게 소수점 ```.```이 유동적이다. 

<img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728013639881.png" alt="image-20220728013639881" style="zoom:25%;" />

<img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728011738099.png" alt="image-20220728011738099" style="zoom:67%;" />

- 지수부: bias(32비트 bias = 127, 64 비트 bias = 1023)을 더한 값을 넣어준다. 지수가 마이너스일때 지수의 부호 비트를 하나 더 만드는 것이 애매해서 8자리 음수 양수를 둘 다 쉽게 표현하고자 bias를 더하는 방식이 생겼다. (읭?)

  - > 지수부 범위
    >
    > | 0 - 127   | 음수 |
    > | --------- | ---- |
    > | 128 - 255 | 양수 |

- 가수부: 가수부에 정규화 결과 소수점 오른쪽에 있는 숫자들을 왼쪽부터 그대로 넣고 남는 자리는 0으로 채운다. 소수점 왼쪽은 정규화를 하면 항상 1이어서 굳이 정하지 않는다. 1을 hidden bit 이라고 부른다.

<img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728013331948.png" alt="image-20220728013331948" style="zoom:50%;" />

### 🟣 위 그림을 바탕으로 예시를 살펴보자.

```부호비트는 1비트```만 가져간다. 부호비트는 실수의 부호를 나타내는 비트자리로 실수가 음수면 1, 양수면 0을 입력해준다. ```지수부는 8비트```, ```가수부는 23비트```를 가져간다.

#### 📝 `12.125`실수를 예시로 표현해보자.

1. ```12.125```에서 ```.```을 기준으로 12는 정수부, 125는 실수부에 속한다.
2. 정수부에 해당하는 12를 2진법으로 바꾸면, 1100값이 나온다.

<img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728012419400.png" alt="image-20220728012419400" style="zoom:50%;" />

3. 소수부에 해당하는 ```0.125```를 이진법으로 구하면 아래와 같다. 현재까지는 '고정소수점'을 구하는 방식이랑 똑같다. 그래서 12.125를 이진법으로 바꾸면 ```1100.001```이라는 숫자가 나온다.

   <img src="/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728012541334.png" alt="image-20220728012541334" style="zoom:50%;" />

4. ```1100.001``` 의 소수점을 맨 앞까지 가져간 만큼 수를 지수로 가져온다.

   - ```1100.001```의 소수점을 가장 첫번째 자리로 옮기기 위해 총 ```3```만큼 움직이게 된다. 3을 2의 지수로 가져와 입력해준다.

   ![image-20220728012716350](/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728012716350.png)

5. 부호비트, 지수부, 가수를 구한다.

   - 부호비트는 양수이기때문에 0

   - 지수부를 구하는 방법으로 우선 ```bias값인 127```에 전단계에서 구한 2의 지수 3을 더하여 130을 구한다. 그 다음 ```130```을 이진법으로 바꾸어 ```10000010```을 구하면 해당 값이 지수부가 된다.

     ![image-20220728012851222](/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728012851222.png)

6. 가수부는 전 단계에서 소수점을 맨 앞으로 가져간 1.100001의 소수부분인 100001이 된다.

   ![image-20220728013433164](/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728013433164.png)

7. 구한 부호, 지수부, 가수부를 각 비트 파트에 입력한다.

![image-20220728013452493](/Users/jisoo.pos/Library/Application Support/typora-user-images/image-20220728013452493.png)



## 🟣 고정소수점과 부동소수점의 의의

부동소수점 방식을 사용하면 고정 소수점보다 훨씬 많은 범위까지 표현할 수 있다. 하지만 부동소수점 방식에 의한 실수 표현은 항상 오차가 존재한다는 단점을 가지고 있다. 

부동소수점은 옛날에 메모리가 부족할 당시, float 자료형을 담을 메모리 공간은 한정되어있는데, 소수점은 무한히 늘어날 수 있기 때문에 이를 효율적으로 담기 위해서 생겨난 개념이라고 한다. (효율적 = 정확한건 아니다, 그래서 오차가 존재하는 것!)

어쨋든 그래서, 컴퓨터에서 실수를 표현하는 방법은 정확한 표현이 아닌 언제나 근사치를 표현할 뿐이라고 한다.



## 📖 References

- [본문에 있는 이미지 출처](https://velog.io/@alicesykim95/%EC%8B%A4%EC%88%98%ED%91%9C%ED%98%84-%EB%B0%A9%EC%8B%9D-%EA%B3%A0%EC%A0%95-%EC%86%8C%EC%88%98%EC%A0%90%EA%B3%BC-%EB%B6%80%EB%8F%99-%EC%86%8C%EC%88%98%EC%A0%90)

- [본문내용도 마찬가지로 위와 같은 링크](https://velog.io/@alicesykim95/%EC%8B%A4%EC%88%98%ED%91%9C%ED%98%84-%EB%B0%A9%EC%8B%9D-%EA%B3%A0%EC%A0%95-%EC%86%8C%EC%88%98%EC%A0%90%EA%B3%BC-%EB%B6%80%EB%8F%99-%EC%86%8C%EC%88%98%EC%A0%90)

- [고정소수점 계산 방식, 부동소수점 정규화 방식 참고](https://developer-eun-diary.tistory.com/9)

  