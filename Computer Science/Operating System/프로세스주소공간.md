// 22.09.07 Noel



#  ❤️ 프로세스 주소공간

 <br/>

### 🤔 프로세스란? <br/>

운영체제가 자원을 할당하는 단위 <br/>

 <br/>

### 🤔 프로세스 주소 공간 <br/>

> 프로그램이 CPU에 의해 실행 -> 프로세스가 생성되고 메모리에 **프로세스 주소 공간**이 할당됨 <br/>

- 프로세스 주소 공간은 대략적으로 아래와 같이 생김 <br/>

<img width="775" alt="image" src="https://user-images.githubusercontent.com/103012104/188882724-307e3eff-447a-454b-a169-52b0b7e4c6ba.png">

| 구분                                   | 내용                                                         |
| -------------------------------------- | ------------------------------------------------------------ |
| **Text(Code)영역**                     | - 우리가 작성하는 **소스코드**가 들어가는 부분, 즉 실행할 프로그램 코드가 저장되는 영역<br/>- 실행 파일을 구성하는 명령어가 올라감 => **함수, 제어문, 상수 등 함수에 대한 기계어 코드**가 여기에 지정<br/>-프로그램이 수정되면 안되므로 ReadOnly 상태로 저장 |
| **Data 영역**                          | -프로그램의 **초기값이 있는 전역변수, 배열, 정적(Static) 변수**가 저장되는 영역<br/>- 즉, 프로그램이 구동되는 동안 **항상 접근 가능한 변수가 저장**되는 영역 <br/>-어떤 프로그램에 전역변수, 정적 변수를 참조하는 코드가 존재한다면, 이 프로그램은 컴파일 된 후에 data 영역을 참조함 <br/>-프로그램의 시작과 함께 할당되며, 프로그램 종료 시 소멸 <br/>-실행 도중에 전역변수가 변경 될 수도 있어 이 영역은 **Read-Write**로 지정 |
| **BSS 영역<br/>(Block Stated Symbol)** | -초기값이 없는 전역변수, 배열, 정적 변수가 저장되는 영역<br/>- 초기화 된 데이터는 Data 영역에 저장, 초기화되지않은 데이터는 BSS에 저장 |
| **Stack 영역**                         | - 함수의 호출과 관계되는 **지역변수와 매개변수가 저장**되는 영역 <br/>- Stack 영역 값은 함수의 호출과 함께 할당되며, **함수의 호출이 완료되면 소멸**<br/>- 원시타입의 데이터가 값과 함께 할당<br/>-Heap 영역에 생성된 Object 타입의 데이터 참조값이 할당<br/>-**LIFO(가장 나중에 들어간게 먼저 나옴)** 특성을 가짐<br/>- 메모리의 높은 주소에서 낮은 주소로 할당 <br/>-컴파일 타임에 크기가 결정되기 때문에 무한히 할당할 수 없음! |
| **Heap 영역**                          | - 런타임에 크기가 결정되는 영역 <br/>- 사용자에 의해 공간이 동적으로 할당 및 해제된다. <br/>- 주로 참조형 데이터(ex.Class, 클로저)등의 데이터가 할당 <br/>- 메모리의 낮은 주소에서 높은 주소로 할당 |

<img width="798" alt="image" src="https://user-images.githubusercontent.com/103012104/188882773-5d266582-c0fd-479e-b3a0-9e643dfa96cb.png">

 <br/>

### 🤔 그럼 각 구역의 크기는..? <br/>

>  프로그램을 작성하면 Code 영역이 늘어남 <br/>

- **Code, Data, BSS**는 Compile time에 크기 **결정되고 이후로 변동되지 않음(고정) <br/>**

- **Stack, Heap**는 **Runtime**시에 메모리 사용이 결정, Heap는 아래로, Stack는 위로 주소값을 매김 <br/>

  ``` 참고
  Stack과 Heap 영역은 사실 같은 공간을 공유함
  Heap이 메모리 위쪽 주소부터 할당되면 Stack는 아래쪽부터 할당되는 식❗️
  그래서 각 영역이 상대 공간을 침범하는 일이 발생할 수 있는데,,,
  이를 각각 Heap Overflowm, Stack overflow라고 부름
  ```

```요약
💡 이해를 위한 용어 설명

① 컴파일타임(Compile Time)
- 프로그램을 생성하기 위해 개발자는 첫재로 소스코드를 작성하고
- 작성한 코드가 컴파일이라는 과정을 통해 기계어 코드로 변환되어 실행가능한 프로그램이 되는 과정


② 런타임(Run Time)
- 컴파일 과정을 마친 응용 프로그램이 사용자에 의해서 실행되며,
- 이러한 응용프로그램이 동작되어지는 '때(Time)'를 의미
```

 <br/>

 <br/>

#### 이렇게 구역을 나눈 이유는 뭘까? <br/>

> 최대한 데이터를 공유하여 메모리 사용량을 줄이기 위함 <br/>

- **Code**는 같은 프로그램 자체에서 <u>모두 같은 내용이기때문에 따로 관리하여 공유! <br/></u>

- **Stack과 Data**를 나눈 이유는, <u>스택 구조의 특성과 전역변수의 활용성을 위한 것</u> <br/>

  ```참고
  프로그램의 함수와 지역변수는, LIFO(가장 늦게 들어간게 먼저 나옴) 특성을 가진 스택에서 실행
  따라서 이 함수들 안에서 공통적으로 실행하는 '전역 변수'는 따로 지정해주면 메모리를 아낄 수 있음
  ```

<img width="734" alt="image" src="https://user-images.githubusercontent.com/103012104/188882871-d519d1fb-c50f-41d7-aabf-f641dab292bc.png">



 <br/>

<hr/>

출처

https://velog.io/@klm03025/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%A3%BC%EC%86%8C-%EA%B3%B5%EA%B0%84

https://dar0m.tistory.com/258
